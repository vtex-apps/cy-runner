---
# secret.name
#
# The name to look for secrets on memory or file
#
# It must be something like that:
# {
#   "config": {
#     "apiKey": "",
#     "apiToken": "",
#     "cookieName": "",
#     "robotMail": "",
#     "robotPassword": ""
#   },
#   "twilio": {
#     "apiUser": "",
#     "apiToken": ""
#   },
#   "jira": {
#     "authorization": ""
#   },
#   "cypress": {
#     "dashboardKey": ""
#   }
# }
#
# At development mode you can use a file called '.[secret.name].json'
# 1. Remember to ignore this file on your Git
# 2. You can add whatever secrets you want on it

secret:
  enabled: true
  name: VTEX_QE

testConfig:
  # devMode       => Start the test in GUI mode (manual)
  # runHeaded     => Start the test in GUI mode (automatic)
  # authVtexCli   => Start the config auth in background
  devMode: false
  runHeaded: false
  authVtexCli:
    enabled: false
    git: https://github.com/vtex/toolbelt.git
    branch: qe/cypress
  # Use Twilio as OPT provider? Don't forget the credentials on secrets.
  twilio:
    enabled: true
  vtex:
    account: productusqa
    id: 2001459804
    domain: myvtex.com
    urlExternalSeller: https://productusqaseller.myvtex.com
    idUrl: https://vtexid.vtex.com.br/api/vtexid/pub/authenticate/default
  cypress:
    enabled: false
    projectId: xyza
    video: true
    videoCompression: false
    videoUploadOnPasses: false
    screenshotOnRunFailure: true
    trashAssetsBeforeRuns: false
    viewportWidth: 1440
    viewportHeight: 900
    defaultCommandTimeout: 25000
    requestTimeout: 25000
    watchForFileChanges: false
    pageLoadTimeout: 45000
    browser: chrome
    chromeWebSecurity: false
  jira:
    enabled: false
    account: config-dev
    board: jira-key
    issueType: task
  slack:
    enabled: false
    channel: some-channel
  # The first will be used to store temp credentials
  stateFiles:
    - .state.json

testWorkspace:
  # If random, it will be dynamically defined
  name: random
  # The letters will be appended on random workspaces
  # If b2b, the name will be something like b2b1234567
  testPrefix: b2b
  setup:
    enabled: false
    stopOnFail: true
    spec: cy-runner/specs/setup.spec.js
    # Enable if you want to run integration tests, for only E2E, don't need
    manageApps:
      enabled: false
      link: vtex.b2b-quotes
      install:
        # App set
        - vtex.admin-customers
        - vtex.b2b-checkout-settings
        - vtex.b2b-orders-history
        - vtex.b2b-organizations-graphql
        - vtex.b2b-organizations
        - vtex.b2b-quotes-graphql
        - vtex.b2b-quotes
        - vtex.storefront-permissions
        - vtex.storefront-permissions-components
        - vtex.storefront-permissions-ui
        - vtex.quickorder
        # Theme
        - vtex.wish-list@1.x
        - vtex.location-availability@0.x
        - vtex.shopper-location@0.x
        - vtex.wordpress-integration@2.x
        - vtex.storefront-permissions-ui@0.x
        - vtex.b2bstore@2.x
      uninstall:
        - vtex.store-theme
  wipe:
    enabled: false
    stopOnFail: false
    spec: cypress/integration/wipe.spec.js
  teardown:
    enabled: false
    stopOnFail: false
    spec: cy-runner/specs/teardown.spec.js

testStrategy:
  # The strategies must be in order, with dependent tests last
  A:
    enabled: true
    sendDashboard: false
    hardTries: 1
    stopOnFail: false
    parallel: true
    # No order guaranteed if parallel = true
    runInOrder: true
    # You can use *, but the order will be not guaranteed
    specs:
      - cypress/integration/pass.spec.js

  B:
    enabled: true
    sendDashboard: false
    hardTries: 1
    stopOnFail: false
    parallel: false
    runInOrder: false
    specs:
      - cypress/integration/pass.spec.js
      - cypress/integration/pass.spec.js
    dependency:
      - A

  C:
    enabled: true
    sendDashboard: false
    hardTries: 1
    stopOnFail: false
    parallel: false
    runInOrder: false
    specs:
      - cypress/integration/*.spec.js

  D:
    enabled: false
    sendDashboard: false
    stopOnFail: true
    hardTries: 1
    parallel: false
    runInOrder: false
    specs:
      - cypress/integration/fail.spec.js
    dependency:
      - A
      - B

  E:
    enabled: false
    sendDashboard: false
    stopOnFail: true
    hardTries: 1
    parallel: false
    runInOrder: false
    specs:
      - cypress/integration/fail.spec.js
    dependency:
      - A
      - B